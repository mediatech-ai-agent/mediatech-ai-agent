@import 'tailwindcss';
@tailwind utilities;

/* Apple Liquid Glass Effect - Figma Style */
.apple-liquid-glass {
  background: linear-gradient(
    135deg,
    rgba(0, 0, 0, 0.4) 0%,
    rgba(0, 0, 0, 0.25) 25%,
    rgba(255, 255, 255, 0.03) 50%,
    rgba(0, 0, 0, 0.2) 75%,
    rgba(0, 0, 0, 0.45) 100%
  );
  backdrop-filter: blur(28px) saturate(150%);
  -webkit-backdrop-filter: blur(28px) saturate(150%);
  border: 1px solid rgba(255, 255, 255, 0.06);
  /* box-shadow: 
    0 20px 50px rgba(0, 0, 0, 0.4),
    inset 0 1px 0 rgba(255, 255, 255, 0.08),
    inset 0 -1px 0 rgba(0, 0, 0, 0.2); */
  border-radius: 18px;
  position: relative;
  overflow: hidden;
}

.apple-liquid-glass::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 2px;
  background: linear-gradient(
    90deg,
    transparent 0%,
    rgba(255, 255, 255, 0.15) 25%,
    rgba(255, 255, 255, 0.3) 50%,
    rgba(255, 255, 255, 0.15) 75%,
    transparent 100%
  );
  opacity: 0.6;
}

.apple-liquid-glass::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background:
    radial-gradient(
      circle at 25% 15%,
      rgba(255, 255, 255, 0.08) 0%,
      transparent 30%
    ),
    radial-gradient(
      circle at 75% 85%,
      rgba(255, 255, 255, 0.04) 0%,
      transparent 35%
    ),
    linear-gradient(
      135deg,
      rgba(255, 255, 255, 0.02) 0%,
      transparent 45%,
      rgba(255, 255, 255, 0.01) 100%
    );
  pointer-events: none;
  mix-blend-mode: soft-light;
}

/* 배경 스크롤 방지 - 최소한 설정 */
html,
body {
  overflow: hidden;
  height: 100vh;
  margin: 0;
  padding: 0;
}

body {
  background-image: url('./assets/bg_main.png');
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  background-attachment: fixed;
  overscroll-behavior: none;
}

button {
  @apply cursor-pointer;
}

a {
  @apply no-underline text-inherit;
}

ul,
ol {
  @apply list-none p-0 m-0;
}

h1,
h2,
h3,
h4,
h5,
h6,
p {
  @apply m-0 p-0 font-normal;
}

img,
video {
  @apply max-w-full h-auto block;
}

/* 커스텀 스크롤바 스타일 */
.custom-scrollbar {
  /* WebKit 기반 브라우저 (Chrome, Safari, Edge) */
  scrollbar-width: thin;
  scrollbar-color: rgba(255, 255, 255, 0.3) transparent;
}

.custom-scrollbar::-webkit-scrollbar {
  width: 8px;
}

.custom-scrollbar::-webkit-scrollbar-track {
  background: transparent;
}

.custom-scrollbar::-webkit-scrollbar-thumb {
  background-color: rgba(255, 255, 255, 0.3);
  border-radius: 4px;
  border: none;
}

.custom-scrollbar::-webkit-scrollbar-thumb:hover {
  background-color: rgba(255, 255, 255, 0.5);
}

/* Firefox */
.custom-scrollbar {
  scrollbar-width: thin;
  scrollbar-color: rgba(255, 255, 255, 0.3) transparent;
}

/* 마크다운 스타일링 */
.markdown-content h1 {
  @apply text-2xl font-bold text-white mb-4 mt-6 first:mt-0;
}

.markdown-content h2 {
  @apply text-xl font-semibold text-white mb-3 mt-5 first:mt-0;
}

.markdown-content h3 {
  @apply text-lg font-medium text-white mb-2 mt-4 first:mt-0;
}

.markdown-content p {
  @apply text-white leading-relaxed mb-3 last:mb-0;
}

.markdown-content ul {
  @apply text-white space-y-1 mb-3 pl-4 list-disc;
}

.markdown-content ol {
  @apply text-white space-y-1 mb-3 pl-4 list-decimal;
}

.markdown-content li {
  @apply text-white;
}

.markdown-content code {
  @apply bg-white/10 text-white px-1.5 py-0.5 rounded text-sm;
}

.markdown-content pre {
  @apply bg-black/20 rounded-lg p-4 mb-3 overflow-x-auto;
}

.markdown-content pre code {
  @apply bg-transparent p-0 rounded-none;
}

.markdown-content blockquote {
  @apply border-l-4 border-white/30 pl-4 italic text-white/80 mb-3;
}

.markdown-content table {
  @apply min-w-full border-collapse mb-3;
}

.markdown-content thead {
  @apply bg-white/10;
}

.markdown-content tbody {
  @apply bg-white/5;
}

.markdown-content tr {
  @apply border-b border-white/10;
}

.markdown-content th {
  @apply text-white font-semibold px-4 py-2 text-left;
}

.markdown-content td {
  @apply text-white px-4 py-2;
}

.markdown-content a {
  @apply text-blue-300 hover:text-blue-200 underline;
}

.markdown-content hr {
  @apply border-white/20 my-6;
}

.markdown-content strong {
  @apply font-semibold text-white;
}

.markdown-content em {
  @apply italic text-white;
}

/* Menu Item Hover Effect - Glass Style from Figma */
.menu-item-hover {
  @apply relative transition-all duration-200 ease-in-out;
}

/* Layer 1: Base white layer (25% opacity, NORMAL blend) */
.menu-item-hover::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  border-radius: 8px;
  background-color: rgba(255, 255, 255, 0.25);
  opacity: 0;
  transition: opacity 0.2s ease-in-out;
  pointer-events: none;
}

/* Layer 2 & 3: Saturation and Linear Dodge effects combined */
.menu-item-hover::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  border-radius: 8px;
  opacity: 0;
  transition: opacity 0.2s ease-in-out;
  pointer-events: none;

  /* Precise glass border with inner/outer glow */
  border: 0.5px solid rgba(255, 255, 255, 0.12);
  box-shadow:
    inset 0.5px 0.5px 1px rgba(255, 255, 255, 0.4),
    inset -0.5px -0.5px 1px rgba(255, 255, 255, 0.08),
    0 0 0 0.5px rgba(255, 255, 255, 0.06);
}

.menu-item-hover:hover::before,
.menu-item-hover:hover::after {
  opacity: 1;
}

/* Menu Glass Background - Ultra transparent glass */
.menu-glass-background {
  position: absolute;
  inset: 0;
  overflow: hidden;
  transition:
    width 0.3s ease-in-out,
    height 0.3s ease-in-out;
  transform-origin: left;
  border-radius: 24px;

  /* Ultra transparent base - no background fill */
  background-color: transparent;

  /* White glass border with gradient strength */
  border: 1px solid rgba(255, 255, 255, 0.08);

  /* Subtle background gradient overlay */
  background-image:
    linear-gradient(
      135deg,
      rgba(255, 255, 255, 0.06) 0%,
      rgba(255, 255, 255, 0.01) 25%,
      transparent 100%
    ),
    linear-gradient(
      315deg,
      rgba(255, 255, 255, 0.04) 0%,
      rgba(255, 255, 255, 0.005) 20%,
      transparent 100%
    );
  background-origin: border-box;
  background-clip: content-box, border-box;

  /* Directional border enhancement - top-left and bottom-right emphasis */
  box-shadow:
    /* Top-left corner highlight */
    inset 1px 1px 0 rgba(255, 255, 255, 0.15),
    /* Bottom-right corner highlight */ inset -1px -1px 0
      rgba(255, 255, 255, 0.1),
    /* Overall subtle glow */ 0 0 0 0.5px rgba(255, 255, 255, 0.03);
}

/* Full menu width variant - 반응형 + 1470px 이하 고정 */
.menu-glass-full {
  width: 280px; /* 1470px 이하에서 280px 고정 */
  height: 100%; /* 부모 높이에 맞춤 */
}

/* Mini menu width variant */
.menu-glass-mini {
  width: 92px;
  height: 100%; /* 부모 높이에 맞춤 */
}

/* CR 모드 HTML 응답 스타일링 */
.cr-html-content {
  color: white;
  line-height: 1.6;
}

.cr-html-content h1,
.cr-html-content h2,
.cr-html-content h3,
.cr-html-content h4,
.cr-html-content h5,
.cr-html-content h6 {
  color: white;
  font-weight: bold;
  margin: 1.5em 0 0.5em 0;
}

.cr-html-content h1 {
  font-size: 1.8em;
  border-bottom: 2px solid rgba(255, 255, 255, 0.3);
  padding-bottom: 0.5em;
}

.cr-html-content h2 {
  font-size: 1.5em;
  border-bottom: 1px solid rgba(255, 255, 255, 0.2);
  padding-bottom: 0.3em;
}

.cr-html-content h3 {
  font-size: 1.3em;
}

.cr-html-content p {
  margin: 1em 0;
  color: rgba(255, 255, 255, 0.9);
}

.cr-html-content ul,
.cr-html-content ol {
  margin: 1em 0;
  padding-left: 2em;
  color: rgba(255, 255, 255, 0.9);
}

.cr-html-content li {
  margin: 0.5em 0;
}

.cr-html-content a {
  color: rgb(139, 192, 255);
  text-decoration: underline;
}

.cr-html-content a:hover {
  color: rgb(159, 212, 255);
}

.cr-html-content strong,
.cr-html-content b {
  color: white;
  font-weight: bold;
}

.cr-html-content em,
.cr-html-content i {
  font-style: italic;
  color: rgba(255, 255, 255, 0.8);
}

.cr-html-content blockquote {
  border-left: 4px solid rgba(255, 255, 255, 0.3);
  padding-left: 1em;
  margin: 1em 0;
  font-style: italic;
  color: rgba(255, 255, 255, 0.8);
}

.cr-html-content code {
  background: rgba(255, 255, 255, 0.1);
  color: white;
  padding: 0.2em 0.4em;
  border-radius: 4px;
  font-family: 'Courier New', monospace;
  font-size: 0.9em;
}

.cr-html-content pre {
  background: rgba(0, 0, 0, 0.3);
  color: white;
  padding: 1em;
  border-radius: 8px;
  overflow-x: auto;
  margin: 1em 0;
}

.cr-html-content pre code {
  background: transparent;
  padding: 0;
}

.cr-html-content table {
  border-collapse: collapse;
  width: 100%;
  margin: 1em 0;
  border: 1px solid rgba(255, 255, 255, 0.2);
}

.cr-html-content th,
.cr-html-content td {
  padding: 0.8em;
  text-align: left;
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.9);
}

.cr-html-content th {
  background: rgba(255, 255, 255, 0.1);
  font-weight: bold;
  color: white;
}

.cr-html-content hr {
  border: none;
  border-top: 1px solid rgba(255, 255, 255, 0.2);
  margin: 2em 0;
}

/* Agent Card Grid - ChatInput 너비에 맞춤 */
.agent-card-grid {
  grid-template-columns: repeat(4, 1fr); /* 4개 카드 균등 분할 */
  width: 100%; /* 부모 컨테이너 전체 너비 사용 */
  gap: 20px !important; /* 1470px 이하에서 고정 간격 - 강제 적용 */
}

/* 레이아웃 CSS 변수 정의 */
:root {
  --sidebar-left: 100px;
  --sidebar-width: 280px;
  --main-left: 450px;
  --main-right: 100px;
  --main-height: 850px;
  --chatinput-height: 236px;
  --chatinput-max-width: 1192px;
  --chatinput-padding: 32px;
}

/* 1470px 이하에서 고정값 강제 적용 */
@media (max-width: 1470px) {
  /* 사이드바 고정 */
  .left-side-menu {
    left: 100px !important;
    max-height: 810px !important;
    width: 280px !important;
  }

  /* 메인 영역 고정 */
  main {
    left: 480px !important;
    right: 0px !important;
    height: 850px !important;
    max-width: 880px !important;
    min-width: 880px !important;
    width: 880px !important;
    transform: translateX(0%) !important;
  }

  /* ChatInput 완전 고정 */
  .chat-input-container {
    max-width: 880px !important;
    min-height: 236px !important;
    height: 236px !important;
    padding: 32px !important;
    max-width: 880px !important;
    min-width: 880px !important;
    width: 880px !important;
    border-radius: 24px !important;
  }

  /* AgentCard 컨테이너 고정 */
  .agent-card-grid-container {
    max-width: 880px !important;
    min-width: 880px !important;
    width: 880px !important;
  }

  /* AgentCard Wrapper 고정 */
  .agent-cards-wrapper {
    padding-bottom: 286px !important;
    padding-top: 0px !important;
  }

  /* AgentCard Grid 고정 */
  .agent-card-grid {
    gap: 20px !important;
    max-width: 880px !important;
    min-width: 880px !important;
    width: 880px !important;
    grid-template-columns: repeat(4, 1fr) !important;
  }

  /* AgentCard 개별 고정 */
  .agent-card-grid > *,
  .agent-card {
    width: 211 !important; /* (1128px - 20px*3간격) / 4 */
    height: 211 !important;
    min-width: 211 !important;
    max-width: 211 !important;
    min-height: 211 !important;
    max-height: 211 !important;
    flex-shrink: 0 !important;
    flex-grow: 0 !important;
  }
}

/* 브라우저 높이 830px 이하에서 높이 고정 */
@media (max-height: 830px) {
  .left-side-menu {
    height: 650px !important;
    max-height: 650px !important;
  }

  main {
    height: 650px !important;
    max-height: 650px !important;
  }
}

/* 1470px 이상에서만 반응형 변수 적용 */
@media (min-width: 1470px) {
  .agent-card-grid {
    gap: 0.9vw !important; /* 1470px 이상에서만 반응형 간격 - 강제 적용 */
  }
}
